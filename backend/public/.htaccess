RewriteEngine On
RewriteBase /

# --- 1️⃣  API routes: existing rule preserved ---
# If the request matches /api/something (without .php), serve the correct PHP file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^api/([A-Za-z0-9_-]+)$ api/$1.php [L,QSA]

# --- 2️⃣  Let normal PHP files work as-is ---
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule \.php$ - [L]

# --- 3️⃣  Serve existing static files (React build: JS, CSS, images, etc.) ---
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule . - [L]

# --- 4️⃣  Fallback: everything else goes to React index.html ---
# This enables React Router to handle /dashboard, /login, etc.
RewriteRule . /index.html [L]
