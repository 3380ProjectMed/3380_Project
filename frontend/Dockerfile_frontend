# ---------- Build stage ----------
FROM node:22-bookworm AS build
WORKDIR /app

# Copy package files from medapp/ folder
COPY medical-app/package*.json ./

# Install deps using lockfile
RUN npm ci

# Copy rest of frontend source
COPY medical-app/ ./

# Build (Vite will output into /app/dist)
RUN npm run build

# ---------- Serve stage ----------
FROM nginx:1.27-alpine

# Copy built files into nginx web root
COPY --from=build /app/dist /usr/share/nginx/html

EXPOSE 80
